<!DOCTYPE html>
<html>
<head>
    <title>Admin Search Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-5">

<div class="container">
    <h4 class="mb-3">Search Users & Doctors</h4>

    <form method="POST" class="mb-4 d-flex gap-2">
        <input
            type="text"
            name="query"
            class="form-control"
            placeholder="Enter name, email, ID, or specialization"
            required
        >
        <button class="btn btn-primary">Search</button>
    </form>

    <!-- USER RESULTS -->
    {% if user_results %}
        <h5>User Accounts</h5>
        <table class="table table-bordered table-sm">
            <thead class="table-light">
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th style="width: 160px;">Action</th>
                </tr>
            </thead>
            <tbody>
            {% for u in user_results %}
                <tr>
                    <td>{{ u.name }}</td>
                    <td>{{ u.email }}</td>
                    <td>{{ u.role }}</td>
                    <td>
                        {% if u.role == "patient" %}
                            <a
                                href="{{ url_for('main.edit_patient', patient_id=u.id) }}"
                                class="btn btn-sm btn-warning">
                                Edit
                            </a>

                            <a
                                href="{{ url_for('main.deactivate_patient', patient_id=u.id) }}"
                                class="btn btn-sm btn-danger">
                                Disable
                            </a>
                        {% else %}
                            <span class="text-muted">N/A</span>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}

    <!-- DOCTOR RESULTS -->
    {% if doctor_results %}
        <h5 class="mt-4">Doctors by Specialization</h5>
        <table class="table table-bordered table-sm">
            <thead class="table-light">
                <tr>
                    <th>Doctor Name</th>
                    <th>Department</th>
                </tr>
            </thead>
            <tbody>
            {% for doc, dept in doctor_results %}
                <tr>
                    <td>{{ doc.name }}</td>
                    <td>{{ dept.name }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}

    {% if not user_results and not doctor_results %}
        <p class="text-muted mt-3">No matching records found.</p>
    {% endif %}

    <div class="mt-3">
        <a href="{{ url_for('main.admin_dashboard') }}">‚Üê Back to Dashboard</a>
    </div>
</div>

</body>
</html>
