<!DOCTYPE html>
<html>
<head>
    <title>Doctor Appointments</title>

    <!-- ✅ Fixed Bootstrap CDN -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
    >
</head>

<body class="p-5">
<div class="container">

    <h4 class="mb-3">Assigned Appointments</h4>

    {% if appointments %}
    <table class="table table-bordered table-hover">
        <thead class="table-light">
            <tr>
                <th>Patient</th>
                <th>Consultation Date</th>
                <th>Time</th>
                <th>Status</th>
                <th style="width: 180px;">Action</th>
            </tr>
        </thead>

        <tbody>
        {% for a in appointments %}
            <tr>
                <td>{{ a.patient.name }}</td>
                <td>{{ a.date }}</td>
                <td>{{ a.time }}</td>
                <td>{{ a.status }}</td>

                <td>
                    {% if a.status == "Booked" %}
                        <a
                            href="{{ url_for('main.complete_appointment', appt_id=a.id) }}"
                            class="btn btn-sm btn-success">
                            Complete
                        </a>

                        <a
                            href="{{ url_for('main.doctor_cancel_appointment', appt_id=a.id) }}"
                            class="btn btn-sm btn-danger">
                            Cancel
                        </a>
                    {% else %}
                        <span class="text-muted">—</span>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p class="text-muted">No appointments assigned.</p>
    {% endif %}

    <div class="mt-3">
        <a href="{{ url_for('main.doctor_dashboard') }}">← Back to Dashboard</a>
    </div>

</div>
</body>
</html>
